{"version":3,"file":"static/js/916.2ce17717.chunk.js","mappings":"+KAGA,MAAMA,EAASC,EAAAA,KAAWC,IAAgG,IAA/F,MAAEC,EAAQ,EAAC,SAAEC,EAAW,CAAC,EAAG,EAAG,GAAE,cAAEC,EAAgB,SAAQ,kBAAEC,EAAiB,QAAEC,GAASL,EAClH,MAAMM,GAAWC,EAAAA,EAAAA,UAGXC,GAAYC,EAAAA,EAAAA,SAAQ,IAWmB,IAAAC,OAVpB,CACrB,OAAU,sBACV,QAAW,cACX,MAAS,YACT,OAAU,cAGgBP,IAAkB,uBAK7C,CAACA,IAEJQ,QAAQC,IAAI,qCAA4BJ,EAAW,iBAAkBL,GAErE,MAAMU,GAAOC,EAAAA,EAAAA,GAAQN,IACf,QAAEO,IAAYC,EAAAA,EAAAA,GAAcH,EAAKI,WAAYJ,EAAKK,OA+CxD,OA7CAC,EAAAA,EAAAA,WAAU,KAGR,GAFAR,QAAQC,IAAI,kCAAyBG,EAAUK,OAAOC,KAAKN,GAAW,QAEjEA,EAIL,IAEEK,OAAOE,OAAOP,GAASQ,QAAQC,IACzBA,GACFA,EAAOC,SAKXL,OAAOC,KAAKN,GAASQ,QAAQG,IAC3B,MAAMF,EAAST,EAAQW,GACnBF,IACFb,QAAQC,IAAI,kCAAyBc,GACrCF,EAAOG,QACJC,OAAO,IACPC,OACHL,EAAOM,UAA8B,WAAlB3B,EAA6B,IAAM,IAG5D,CAAE,MAAO4B,GACPpB,QAAQoB,MAAM,0BAAsBA,GAChC1B,GAASA,EAAQ0B,EACvB,GAEC,CAAChB,EAASZ,EAAeE,KAE5Bc,EAAAA,EAAAA,WAAU,IACD,KACDJ,GACFK,OAAOE,OAAOP,GAASQ,QAAQC,IACzBA,GACFA,EAAOC,UAKd,CAACV,IAECF,GAASA,EAAKK,OAMnBP,QAAQC,IAAI,qCAAiCJ,IAG3CwB,EAAAA,EAAAA,KAAA,SAAOC,IAAK3B,EAAS4B,UACnBF,EAAAA,EAAAA,KAAA,aACEG,OAAQtB,EAAKK,MACbjB,MAAOA,EACPC,SAAUA,QAZdS,QAAQoB,MAAM,sDAAkDvB,GAC5DH,GAASA,EAAQ,IAAI+B,MAAM,gCACxB,QAiBX,CAAC,sBAAuB,cAAe,YAAa,cAAcb,QAAQc,IACxE,MAAMC,EACqC,IAAA5B,OACnC2B,GACR1B,QAAQC,IAAI,2BAAkB0B,GAC9BxB,EAAAA,EAAQyB,QAAQD,KAGlB,S","sources":["components/Avatar.jsx"],"sourcesContent":["import React, { useEffect, useRef, useMemo } from 'react';\nimport { useGLTF, useAnimations } from '@react-three/drei';\n\nconst Avatar = React.memo(({ scale = 1, position = [0, 0, 0], animationType = 'marche', onAnimationChange, onError }) => {\n  const groupRef = useRef();\n  \n  // Mapping des animations vers les fichiers GLB\n  const modelPath = useMemo(() => {\n    const animationFiles = {\n      'marche': 'marche en ronde.glb',\n      'bonjour': 'bonjour.glb',\n      'rumba': 'rumba.glb',\n      'hiphop': 'hiphop.glb'\n    };\n    \n    const file = animationFiles[animationType] || 'marche en ronde.glb';\n    \n    return process.env.NODE_ENV === 'development' \n      ? `${process.env.PUBLIC_URL || ''}/${file}`\n      : `/${file}`;\n  }, [animationType]);\n\n  console.log('üé¨ Loading avatar model:', modelPath, 'for animation:', animationType);\n\n  const gltf = useGLTF(modelPath);\n  const { actions } = useAnimations(gltf.animations, gltf.scene);\n\n  useEffect(() => {\n    console.log('üéØ Actions available:', actions ? Object.keys(actions) : 'none');\n    \n    if (!actions) {\n      return;\n    }\n\n    try {\n      // Arr√™ter toutes les animations\n      Object.values(actions).forEach(action => {\n        if (action) {\n          action.stop();\n        }\n      });\n\n      // Lancer toutes les animations du mod√®le\n      Object.keys(actions).forEach(actionName => {\n        const action = actions[actionName];\n        if (action) {\n          console.log('‚ñ∂Ô∏è Playing animation:', actionName);\n          action.reset()\n            .fadeIn(0.5)\n            .play();\n          action.timeScale = animationType === 'marche' ? 1.2 : 1.0;\n        }\n      });\n    } catch (error) {\n      console.error('‚ùå Animation error:', error);\n      if (onError) onError(error);\n    }\n\n  }, [actions, animationType, onError]);\n\n  useEffect(() => {\n    return () => {\n      if (actions) {\n        Object.values(actions).forEach(action => {\n          if (action) {\n            action.stop();\n          }\n        });\n      }\n    };\n  }, [actions]);\n\n  if (!gltf || !gltf.scene) {\n    console.error('‚ùå Avatar loading error: No scene available for', modelPath);\n    if (onError) onError(new Error('Failed to load avatar model'));\n    return null;\n  }\n\n  console.log('‚úÖ Avatar loaded successfully:', modelPath);\n\n  return (\n    <group ref={groupRef}>\n      <primitive \n        object={gltf.scene} \n        scale={scale} \n        position={position}\n      />\n    </group>\n  );\n});\n\n// Pr√©charger tous les mod√®les\n['marche en ronde.glb', 'bonjour.glb', 'rumba.glb', 'hiphop.glb'].forEach(file => {\n  const path = process.env.NODE_ENV === 'development' \n    ? `${process.env.PUBLIC_URL || ''}/${file}`\n    : `/${file}`;\n  console.log('üîÑ Preloading:', path);\n  useGLTF.preload(path);\n});\n\nexport default Avatar;"],"names":["Avatar","React","_ref","scale","position","animationType","onAnimationChange","onError","groupRef","useRef","modelPath","useMemo","concat","console","log","gltf","useGLTF","actions","useAnimations","animations","scene","useEffect","Object","keys","values","forEach","action","stop","actionName","reset","fadeIn","play","timeScale","error","_jsx","ref","children","object","Error","file","path","preload"],"sourceRoot":""}